import{S as t,i as e,s,L as n,e as a,a as r,x as l,c as o,M as c,n as i,f as d,t as f,b as g,d as h,K as u}from"./main.js";import{c as p}from"./client-76b8804a.js";import{f as x}from"./currency-0efccd32.js";function v(t){t[1]=t[2].data}function y(t,e,s){const n=t.slice();return n[3]=e[s].month,n[4]=e[s].sales,n}function m(t,e,s){const n=t.slice();return n[7]=e[s].year,n[4]=e[s].sales,n}function b(t){return{c:i,m:i,p:i,d:i}}function w(t){let e,s,n,l,c,i,p,b;v(t);let w,k,B,I,M,j,Y,q,A,K,L,$,G,N,O,R,z,D,E,F,H,J=t[1].getStats.students+"",P=t[1].getStats.teachers+"",Q=t[1].getStats.classes+"",T=`${t[1].getStats.openInvoices} (${x.format(t[1].getStats.openInvoicesAmount/100)})`,U=t[1].getStats.salesByYear,V=[];for(let e=0;e<U.length;e+=1)V[e]=S(m(t,U,e));let W=t[1].getStats.salesByMonth,X=[];for(let e=0;e<W.length;e+=1)X[e]=C(y(t,W,e));return{c(){e=a("h2"),e.textContent="Statistik",s=r(),n=a("div"),l=a("div"),c=a("div"),i=a("div"),i.textContent="Schüler",p=r(),b=a("div"),w=f(J),k=r(),B=a("div"),I=a("div"),I.textContent="Lehrer",M=r(),j=a("div"),Y=f(P),q=r(),A=a("div"),K=a("div"),K.textContent="Klassen",L=r(),$=a("div"),G=f(Q),N=r(),O=a("div"),R=a("div"),R.textContent="Offene Rechnungen",z=r(),D=a("div"),E=f(T),F=r();for(let t=0;t<V.length;t+=1)V[t].c();H=r();for(let t=0;t<X.length;t+=1)X[t].c();g(i,"class","w-3/12"),g(b,"class","w-9/12"),g(c,"class","flex flex-wrap px-6 py-3 text-gray-800 border-b hover:bg-gray-100"),g(I,"class","w-3/12"),g(j,"class","w-9/12"),g(B,"class","flex flex-wrap px-6 py-3 text-gray-800 border-b hover:bg-gray-100"),g(K,"class","w-3/12"),g($,"class","w-9/12"),g(A,"class","flex flex-wrap px-6 py-3 text-gray-800 border-b hover:bg-gray-100"),g(R,"class","w-3/12"),g(D,"class","w-9/12"),g(O,"class","flex flex-wrap px-6 py-3 text-gray-800 border-b hover:bg-gray-100"),g(l,"class","bg-white"),g(n,"class","overflow-hidden border rounded shadow-md")},m(t,a){o(t,e,a),o(t,s,a),o(t,n,a),h(n,l),h(l,c),h(c,i),h(c,p),h(c,b),h(b,w),h(l,k),h(l,B),h(B,I),h(B,M),h(B,j),h(j,Y),h(l,q),h(l,A),h(A,K),h(A,L),h(A,$),h($,G),h(l,N),h(l,O),h(O,R),h(O,z),h(O,D),h(D,E),h(l,F);for(let t=0;t<V.length;t+=1)V[t].m(l,null);h(l,H);for(let t=0;t<X.length;t+=1)X[t].m(l,null)},p(t,e){if(v(t),1&e){let s;for(U=t[1].getStats.salesByYear,s=0;s<U.length;s+=1){const n=m(t,U,s);V[s]?V[s].p(n,e):(V[s]=S(n),V[s].c(),V[s].m(l,H))}for(;s<V.length;s+=1)V[s].d(1);V.length=U.length}if(1&e){let s;for(W=t[1].getStats.salesByMonth,s=0;s<W.length;s+=1){const n=y(t,W,s);X[s]?X[s].p(n,e):(X[s]=C(n),X[s].c(),X[s].m(l,null))}for(;s<X.length;s+=1)X[s].d(1);X.length=W.length}},d(t){t&&d(e),t&&d(s),t&&d(n),u(V,t),u(X,t)}}}function S(t){let e,s,n,l,c,u,p=t[7]+"",v=x.format(t[4]/100)+"";return{c(){e=a("div"),s=a("div"),n=f(p),l=r(),c=a("div"),u=f(v),g(s,"class","w-3/12"),g(c,"class","w-9/12"),g(e,"class","flex flex-wrap px-6 py-3 text-gray-800 border-b hover:bg-gray-100")},m(t,a){o(t,e,a),h(e,s),h(s,n),h(e,l),h(e,c),h(c,u)},p:i,d(t){t&&d(e)}}}function C(t){let e,s,n,l,c,u,p,v=t[3]+"",y=x.format(t[4]/100)+"";return{c(){e=a("div"),s=a("div"),n=f(v),l=r(),c=a("div"),u=f(y),p=r(),g(s,"class","w-3/12"),g(c,"class","w-9/12"),g(e,"class","flex flex-wrap px-6 py-3 text-gray-800 border-b hover:bg-gray-100")},m(t,a){o(t,e,a),h(e,s),h(s,n),h(e,l),h(e,c),h(c,u),h(e,p)},p:i,d(t){t&&d(e)}}}function k(t){return{c:i,m:i,p:i,d:i}}function B(t){let e,s,f,g={ctx:t,current:null,token:null,hasCatch:!1,pending:k,then:w,catch:b,value:2};return n(t[0],g),{c(){e=a("h1"),e.textContent="Übersicht",s=r(),f=l(),g.block.c()},m(t,n){o(t,e,n),o(t,s,n),o(t,f,n),g.block.m(t,g.anchor=n),g.mount=()=>f.parentNode,g.anchor=f},p(e,[s]){c(g,t=e,s)},i:i,o:i,d(t){t&&d(e),t&&d(s),t&&d(f),g.block.d(t),g.token=null,g=null}}}function I(t){return[p.request("\n    query GetStats {\n      getStats {\n        salesByMonth {\n          month\n          sales\n        }\n        salesByYear {\n          year\n          sales\n        }\n        students\n        teachers\n        classes\n        openInvoices\n        openInvoicesAmount\n      }\n    }\n  ")]}class M extends t{constructor(t){super(),e(this,t,I,B,s,{})}}export{M as default};
//# sourceMappingURL=index-aa583dce.js.map

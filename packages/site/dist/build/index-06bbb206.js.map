{"version":3,"file":"index-06bbb206.js","sources":["../../src/pages/admins/classes/index.svelte"],"sourcesContent":["<script>\n  import { classes, status } from \"../../../stores/classes\";\n  import { getTimeString } from \"../../../utils/time\";\n  import { metatags, url } from \"@roxi/routify\";\n\n  metatags.title = \"Klassen\";\n  metatags.description = \"Description coming soon...\";\n\n  classes.fetch();\n\n  $: sortedClasses = $classes.sort((a, b) => {\n    let comparison = 0;\n\n    if (a.state > b.state) comparison = -1;\n\n    if (a.state < b.state) comparison = 1;\n\n    return comparison;\n  });\n\n  const StateArray = [\n    [\"IN_PREPARATION\", \"in Vorbereitung\", \"purple\"],\n    [\"OPEN_FOR_REGISTRATION\", \"Anmeldung geöffnet\", \"blue\"],\n    [\"ONGOING\", \"laufend\", \"yellow\"],\n    [\"COMPLETED\", \"abgeschlossen\", \"teal\"],\n    [\"CANCELLED\", \"abgebrochen\", \"red\"],\n  ];\n\n  function formatClassState(state) {\n    return StateArray.find((s) => s[0] === state)[1];\n  }\n\n  function getClassStateColor(state) {\n    return StateArray.find((s) => s[0] === state)[2];\n  }\n</script>\n\n<h1>Klassen</h1>\n\n<div class=\"flex items-baseline justify-end mb-6\">\n  <a href={$url('./new')} class=\"text-gray-800 hover:text-teal-600\">\n    Neue Klasse erstellen\n  </a>\n</div>\n\n{#if $status === 'FETCHING'}\n  <p>Loading...</p>\n{:else if sortedClasses.length > 0}\n  <div class=\"overflow-hidden border rounded shadow-md\">\n    <header\n      class=\"hidden px-6 py-2 text-sm leading-none tracking-wide text-gray-600 bg-gray-200 border-b md:flex\">\n      <div class=\"w-3/12\">Fach</div>\n      <div class=\"w-5/12 text-center\">Lehrer</div>\n      <div class=\"w-1/12 text-center\">Schüler</div>\n      <div class=\"w-3/12 text-center\">Status</div>\n    </header>\n    <div class=\"bg-white\">\n      {#each sortedClasses as clss, index (clss.id)}\n        <a\n          href={$url('./' + clss.id)}\n          class=\"flex flex-wrap px-6 py-3 text-gray-800 border-b hover:bg-gray-100\">\n          <div class=\"w-full mb-2 sm:mb-0 sm:w-3/12\">\n            <div>{clss.subject}</div>\n            <div class=\"text-sm text-gray-700\">{getTimeString(clss.times)}</div>\n          </div>\n\n          <div class=\"flex w-full mb-2 text-gray-700 sm:mb-0 sm:items-center sm:justify-center sm:w-5/12\">\n            <div>{clss.teacher.first_name + ' ' + clss.teacher.last_name}</div>\n          </div>\n\n          <div class=\"flex w-full mb-2 sm:mb-0 sm:items-center sm:justify-center sm:w-1/12\">\n            <div><span class=\"sm:hidden\">Schüler:</span> {clss.enrollments.length}</div>\n          </div>\n\n          <div class=\"flex w-full mb-2 sm:mb-0 sm:items-center sm:justify-center sm:w-3/12\">\n            <div\n              class=\"px-4 py-1 text-sm leading-none text-{getClassStateColor(clss.state)}-600\n                bg-{getClassStateColor(clss.state)}-100 rounded-full\">\n              {formatClassState(clss.state)}\n            </div>\n          </div>\n        </a>\n      {/each}\n    </div>\n  </div>\n{:else}\n  <div>keine Klassen</div>\n{/if}\n"],"names":["insert","target","div","anchor","ctx","get_key","id","length","i","div5","append","header","div4","p","t0_value","subject","getTimeString","times","teacher","first_name","last_name","enrollments","state","attr","a","a_href_value","div2","div0","div1","div3","div6","span","div8","div7","dirty","set_data","t0","t2","t2_value","t4","t4_value","t8","t8_value","t10","t10_value","create_if_block","create_if_block_1","h1","metatags","title","description","classes","fetch","StateArray","$$invalidate","sortedClasses","$classes","sort","b","comparison","find","s"],"mappings":"sdAsFEA,EAAwBC,EAAAC,EAAAC,kEA7BbC,EAAa,GAAiB,MAAAC,EAAAD,GAAAA,KAAKE,mBAAxCC,OAAIC,GAAA,EAAA,yhBATVR,EAoCMC,EAAAQ,EAAAN,GAnCJO,EAMSD,EAAAE,UACTD,EA2BMD,EAAAG,+DA1BGR,EAAa,oKAXxBJ,EAAiBC,EAAAY,EAAAV,2FAgBDW,EAAAV,KAAKW,QAAO,KACkBC,EAAcZ,EAAI,GAACa,OAAK,KAItDb,EAAI,GAACc,QAAQC,WAAa,IAAMf,EAAI,GAACc,QAAQE,YAILhB,EAAI,GAACiB,YAAYd,OAAM,KAOlEH,EAAgB,GAACA,EAAI,GAACkB,OAAK,6kBAFgBlB,EAAkB,GAACA,EAAK,GAAAkB,kBAC9DlB,EAAkB,GAACA,EAAI,GAACkB,OAAK,yGAlBjCC,EAAAC,EAAA,OAAAC,EAAArB,EAAK,GAAA,KAAOA,KAAKE,2GADzBN,EAuBIC,EAAAuB,EAAArB,GApBFO,EAGMc,EAAAE,GAFJhB,EAAyBgB,EAAAC,iBACzBjB,EAAoEgB,EAAAE,iBAGtElB,EAEMc,EAAAZ,GADJF,EAAmEE,EAAAiB,iBAGrEnB,EAEMc,EAAAM,GADJpB,EAA4EoB,EAAArB,GAAvEC,EAAuCD,EAAAsB,wBAG9CrB,EAMMc,EAAAQ,GALJtB,EAIMsB,EAAAC,6BAjBA,EAAAC,GAAApB,KAAAA,EAAAV,KAAKW,QAAO,KAAAoB,EAAAC,EAAAtB,eACkBE,EAAcZ,EAAI,GAACa,OAAK,KAAAkB,EAAAE,EAAAC,eAItDlC,EAAI,GAACc,QAAQC,WAAa,IAAMf,EAAI,GAACc,QAAQE,YAASe,EAAAI,EAAAC,eAIdpC,EAAI,GAACiB,YAAYd,OAAM,KAAA4B,EAAAM,EAAAC,eAOlEtC,EAAgB,GAACA,EAAI,GAACkB,OAAK,KAAAa,EAAAQ,EAAAC,sDAFgBxC,EAAkB,GAACA,EAAK,GAAAkB,kBAC9DlB,EAAkB,GAACA,EAAI,GAACkB,OAAK,qCAlBjC,EAAAY,GAAAT,KAAAA,EAAArB,EAAK,GAAA,KAAOA,KAAKE,sFAd5B,MAAY,aAAZF,KAAsByC,EAEjBzC,EAAa,GAACG,OAAS,EAACuC,iGAPkC,2CAAzDvB,EAAAC,EAAA,OAAAC,EAAArB,KAAK,uHAHhBJ,EAAgBC,EAAA8C,EAAA5C,YAEhBH,EAIMC,EAAAC,EAAAC,GAHJO,EAEIR,EAAAsB,+CAFK,EAAAU,GAAAT,KAAAA,EAAArB,KAAK,uPAnCd4C,EAASC,MAAQ,UACjBD,EAASE,YAAc,6BAEvBC,EAAQC,cAYFC,EAAU,EACb,iBAAkB,kBAAmB,WACrC,wBAAyB,qBAAsB,SAC/C,UAAW,UAAW,WACtB,YAAa,gBAAiB,SAC9B,YAAa,cAAe,+CAf9BC,EAAA,EAAEC,EAAgBC,EAASC,KAAI,CAAEjC,EAAGkC,KAC/B,IAAAC,EAAa,SAEbnC,EAAEF,MAAQoC,EAAEpC,QAAOqC,GAAc,GAEjCnC,EAAEF,MAAQoC,EAAEpC,QAAOqC,EAAa,GAE7BA,aAWA,SAAiBrC,UACjB+B,EAAWO,KAAMC,GAAMA,EAAE,KAAOvC,GAAO,IAGvC,SAAmBA,UACnB+B,EAAWO,KAAMC,GAAMA,EAAE,KAAOvC,GAAO"}